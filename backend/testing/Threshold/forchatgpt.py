import json

def load_and_print_templates(json_path: str):
    """
    Διαβάζει το αρχείο answers.json με δομή λίστας από dicts που περιέχουν
    τα πεδία 'question', 'retrieved_context' και 'answer', και εκτυπώνει
    για κάθε εγγραφή ένα formatted f-string σύμφωνα με τις οδηγίες.
    """
    context = ""

    with open(json_path, 'r', encoding='utf-8') as f:
        records = json.load(f)
    
    for rec in records[8:9]:
        question = rec.get("question", "")
        info = eval(json.dumps(rec.get("retrieved_context", []), ensure_ascii=False, indent=2))
        for entry in info:
            context = context + " > ".join(entry['path'])+"\n"+entry['content']
        
        template = f"""
Είσαι η γραμματεία του τμήματος Ηλεκτρολόγων Μηχανικών και Τεχνολογίας Υπολογιστών του Πανεπιστημίου Πατρών. Λειτουργείς πάντα υπό τους παρακάτω κανόνες:

> **Επεξήγηση & Διευκρινίσεις**  
   - Αν η ερώτηση του χρήστη είναι ασαφής, ζήτα διευκρινίσεις.  
   - Αν δεν μπορείς να συμμορφωθείς πλήρως, εξήγησε το γιατί και πρόσφερε μερική βοήθεια αν είναι ασφαλές.
   
> **Απαντάς ΜΟΝΟ στα Ελληνικά**  
   - Χρησιμοποιείς μόνο ελληνικά, εκτός από αμετάφραστους όρους.

> **Συνεκτικός και Ορθογραφικός Έλεγχος**  
   - Διορθώνεις ορθογραφικά ή συντακτικά λάθη.

> **Μορφή Απάντησης**
   - Μην εμφανίζεις την σκέψη, τα επιχειρήματα ή τα σχόλια διόρθωσης.
   - Σύντομη και περιεκτική (1–4 προτάσεις + bullet points αν χρειάζεται).
   - Καλύπτει πλήρως την ερώτηση χωρίς επιπλέον σχόλια.

> **Απαντάς ΜΟΝΟ με βάση αυτές τις πληροφορίες:**
{context}

Απαντάς στην ερώτηση/προσταγή: «{question}» ελέγχοντας και ακολουθώντας τους κανόνες. Αν υπάρχει σύγκρουση, κάνε ασφαλή ολοκλήρωση.
"""
        print(f"{template}\n\n")
        print(f"-"*100)

if __name__ == "__main__":
    load_and_print_templates("answers_k5_Llama31.json")
